<%= render "form_javascripts" %>

<%= form_for @item,
            :url => options,
            :html => { :multipart => true, :class => "form-horizontal" } do |form| %>

  <%= render "helpers/admin/resources/errors" %>

  <fieldset>
    <% unless headless_mode? %>
      <legend><%= @item.to_label %></legend>
    <% end %>

    <%= build_form(fields, form) %>

    <% unless headless_mode? %>
      <div class="form-actions">
        <% build_save_options.each do |key, value, special| %>
          <% klass = key.eql?("_save") ? 'btn-primary' : 'btn' %>
          <%
            message = Typus::I18n.t(value)
            options = { :name => key,
                        :onclick => "Typus.setConfirmUnload(false);",
                        'data-disable-with' => message,
                        :class => "btn #{klass}" }
          %>
          <%= submit_tag message, options %>
        <% end %>
      </div>
    <% else %>
      <%= hidden_field_tag "_continue" %>
    <% end %>
  </fieldset>

<% end %>
