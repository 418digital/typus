<%
  chosen_class = "chzn-select-#{attribute_id}"
  new_page_title = "WIP"
%>

<div id="modal-from-dom-<%= attribute_id %>" class="modal hide fade">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">&times;</a>
    <h3><%= new_page_title %></h3>
  </div>
  <div class="modal-body"></div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal"><%= Typus::I18n.t("Cancel") %></a>
    <a href="#" class="btn btn-primary"><%= Typus::I18n.t("Save") %></a>
  </div>
</div>

<div class="control-group" id="<%= attribute_id %>">
  <%= form.label attribute, label_text, { :class => "control-label" } %>
  <%= hidden_field_tag related_ids %>
  <div class="controls">
    <%= select_tag related_ids,
                   options_from_collection_for_select(values.all, "id", "to_label", related_items.map(&:id)),
                   html_options.merge(:multiple => true,
                                      :id => attribute_id,
                                      :class => chosen_class,
                                      "data-placeholder" => Typus::I18n.t("Select Some Options")) %>
  </div>
</div>

<script type="text/javascript">
  // $(document).ready(function () { $(".<%= chosen_class %>").chosen(); });
</script>
